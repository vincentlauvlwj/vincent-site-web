---
layout:     post
title:      "体检系统工作日记 - 无形装逼，最为致命~~~"
author:     "刘文俊"
date:       2015-08-31
header-img: "img/contact-bg.jpg"
tags:
    - 随写
---

> 论如何与客户斗智斗勇

2015-08-24
--------------------------------------------------------------------
 - *DONE:* 组合设置中上移下移按钮以检查类型为准，是否增删项目却是以科室为准
 - *DONE:* 非检验科检验类组合在体检录入中无法录入
 - *DONE:* 增加刷新导入结果的功能
 - *DONE:* WORKLIST.IS_CONFIRM需要再确认 --- 已确认，不需要将此字段改为1
 - *DONE:* 体检录入中是否需要录入建议，再确认 --- 已确认不需要

<!-- more -->

2015-08-25
---------------------------------------------------------------------
 - *DONE:* 发现PE_ITEM_RESULT_KEY表中存在极大量的重复数据

2015-08-26
--------------------------------------------------------------------
 - *DONE:* 异常诊断页面，点击追加后再选中下面DataGridView中的一条记录，异常结果状态的ComboBox状态仍为Disabled

2015-08-31
-----------------------------------------------------------------
 1. 报告
  - *DONE:* 封面标题字体修改
  - *DONE:* 封面增加体检日期与报告日期信息，去除分组
  - *DONE:* 总检医生的栏尾可能会在不同页重复出现
  - *DONE:* 结果页样式修改
  - *DONE:* 增加结果综述后导致了页码混乱
 1. 字典问题
  - 检查结果有异常时，提示信息不能少
  - 某些组合的名称不合适，如外科检查2
  - 生化23项的结果中居然有尿糖阳性的异常
  - 葡萄糖的结果为何为1+(本来就是)
  - 许多项目都没有参考值
  - 内科三大项目中医生填写结果无正确提示
 1. *DONE:* 放射科与B超的检查医生未能从HIS读取
 1. *DONE:* 体检录入中未审核的状态应该去除
 1. *DONE:* 把动态血压的结果改成正确

2015-09-02
---------------------------
 - *DONE:* 检验科标本状态从何获得（须HIS或LIS配合，待确认）
 - *DONE:* 修正了当多个组合同时含有某个项目时，项目结果在报告中重复出现的bug(修改了PE_RESULT_INFO，PE_EXAM_RESULT和PE_ELECTROCARDIO_RESULT三个视图的SQL)
 - *DONE:* 组合设置里增删项目与调整项目报告顺序的功能到底何时禁用何时启用？现在的逻辑如下：

	> 非检验科检验类：不可增删，可上下移
	> 检验科非检验类：可增删，不可上下移
	> 检验科检验类：可增删，不可上下移
	> 非检验科非检验类：不可增删，可上下移

   为何是这样的逻辑？
 - *DONE:* 连续点击刷新结果按钮会重复导入检验检查结果
 - *DONE:* 项目设置检验类型下拉框有重复数据
 - *DONE:* 是否要在字典设置各个界面中加个编辑按钮，选中一条记录时，信息区域处于锁定状态，点击编辑按钮时，才进入编辑状态（暂时不加）

2015-09-06
---------------------------------
 - *DONE:* 考虑是否删除PE_ASSEM_RESULT.P_ASSEM_RESULT_ID字段，原因：这个字段并没有什么卵用，而且由于此字段的存在，跨数据库导入数据的时候容易造成主键冲突，暂时已将主键约束删除，考虑是否把这个字段也删掉(暂时没删)
 - *DONE:* 考虑是否把PE_ITEM_DICT的ITEM_MAX_VALUE和ITEM_MIN_VALUE删除，参考区间填入ITEM_NROMAL_VALUE字段内，原因，参考值范围可能会有不同情况的精度需求，而且在异常诊断中并不会用上这两个字段所以没有区分出来的必要
 - *DONE:* 组合设置中检查类型，科室，可否增删与上下移似乎逻辑还不够清晰？（已取消增删与上下移的限制）

2015-09-07
--------------------------------
 - *DONE:* 体检录入的DataGridView的提示那一列是干什么的？
 - *DONE:* 组合设置，项目排序时的序号有时会乱
 - *DONE:* 修改了DBHelper，已支持事务嵌套

2015-09-08
----------------------------------
 - *DONE:* 检验项目的标本状态可从LAB_TEST_MASTER.NOTES_FOR_SPCM字段中获取
 - *DONE:* 检验系统在出完结果后会把TEST_NO修改掉，这个修改是否会影响到判断是否可撤销检验申请的逻辑？(改为查LAB_RESULT表中有没有结果)

2015-09-09
---------------------------------
 - *DONE:* 报告封面将总检日期改为体检第一个组合的完成时间
 - *DONE:* 报告封面的文字位置微调
 - *DONE:* 内科的组合混乱
 - *DONE:* 刷新检验检查结果时误删了外检的结果
 - ***TODO:*** 考虑是否加入在启动程序时提示复查的功能

2015-09-10
--------------------------------
 - *DONE:* 增加了更新日志的功能

2015-09-14
-----------------------------------
 - *DONE:* 修复了个人登记中无法添加套餐的BUG（原因，PE_ASSEM_DICT表中新增了ASSEM_ORDER字段，与PE_SET_ASSEM表联合查询时发生了未明确字段的异常）

2015-09-15
---------------------
 - *DONE:* 修复了个人登记中重复提示保存的bug
 - *DONE:* 体检中心那台打印机打印出来的条形码无法扫描